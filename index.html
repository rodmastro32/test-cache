<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/test-cache/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React + TS</title>
    <a>hello</a>
    <script id="vite-plugin-pwa:inline-sw">
      // Get path from window variable
      const webviewPath = window.path || "";
      console.log(
        "%c Client: Starting Service Worker Registration üîÑ",
        "background: #222; color: #bada55; font-size: 20px; padding: 10px;"
      );

      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          // Register service worker with query parameter
          navigator.serviceWorker
            .register(
              `sw.js${
                webviewPath ? `?path=${encodeURIComponent(webviewPath)}` : ""
              }`
            )
            .then((registration) => {
              console.log(
                webviewPath,
                "%c Client: ServiceWorker registration successful ‚úÖ",
                "background: #222; color: #bada55; font-size: 16px;"
              );
              console.log(
                "%c Client: ServiceWorker scope:",
                "background: #222; color: #bada55; font-size: 16px;",
                registration.scope
              );

              // Log when the service worker becomes active
              registration.addEventListener("activate", () => {
                console.log(
                  "%c Client: ServiceWorker activated üöÄ",
                  "background: #222; color: #bada55; font-size: 16px;"
                );
              });

              // Log when the service worker is controlling the page
              registration.addEventListener("controllerchange", () => {
                console.log(
                  "%c Client: ServiceWorker is now controlling the page üéÆ",
                  "background: #222; color: #bada55; font-size: 16px;"
                );
              });
            })
            .catch((error) => {
              console.error(
                "%c Client: ServiceWorker registration failed ‚ùå",
                "background: #222; color: #ff4444; font-size: 16px;",
                error
              );
            });
        });
      } else {
        console.error(
          "%c Client: ServiceWorker not supported ‚ùå",
          "background: #222; color: #ff4444; font-size: 16px;"
        );
      }
    </script>
    <script type="module" crossorigin src="/test-cache/assets/js/index-jw9xorNu.js"></script>
    <link rel="modulepreload" crossorigin href="/test-cache/assets/js/vendor-DPx9Otuh.js">
    <link rel="stylesheet" crossorigin href="/test-cache/assets/css/index-Dg8jL3ag.css">
  <link rel="manifest" href="/test-cache/manifest.webmanifest"></head>
  <body>
    <div id="root"></div>
  </body>
</html>
